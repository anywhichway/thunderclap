<html>
<head>
<script src="./thunderclap.js"></script>
<script>
var db;
function submit(event) {
	event.preventDefault();
	const config = {username:"",password:""},
		endpoint = `${window.location.protocol}//${window.location.host}/db.json`;
	Object.keys(config).forEach((key) => {
		config[key] = document.getElementById(key).value;
	});
	const {username,password} = config;
	db = new Thunderclap({endpoint,user:{username,password}});
	const command = {fname:"",arg1:"",arg2:""};
	Object.keys(command).forEach((key) => {
		command[key] = document.getElementById(key).value;
	});
	const {fname,arg1,arg2} = command;
	if(fname) {
		const el = document.getElementById("console");
		el.innerText = "";
		Function("db",`return db.${fname}(${arg1},${arg2})`)(db)
			.then((result => {
				el.innerText = JSON.stringify(result);
			}))
			.catch((e) => {
				el.innerHTML = e.errors ? JSON.stringify(e.errors.map((e) => e+"")) : e+"";
			});
	}
	return false;
}
</script>
</head>
<body>
Username:<input type="text" id="username" placeholder="username" required value="dbo"><br>
Password:<input type="password" id="password" required value="dbo"><br>
<select id="fname">
	<option></option>
	<option>getItem</option>
	<option>getSchema</option>
	<option>putItem</option>
	<option>query</option>
	<option>removeItem</option>
	<option>setItem</option>
	<option>createUser</option>
</select>
<input type="text" id="arg1" placeholder="arg1">
<input type="text" id="arg2" placeholder="arg2"><br>
<button onclick="submit(event)">Submit</button>
<div id="console">

</div>
</body>
</html>